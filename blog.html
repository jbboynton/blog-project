<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!-- James Boynton
3/20/16
COMI 2010 Client-Side Scripting Languages
Project 2

blog.html

XHTML page for Project 4.  This page allows a user to update his or her
  profile.  The user can update their personal info and their links of interest.
  They can also post content to their page.  Posts can be images, statuses, or
  links. -->

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Project 4</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />

    <!-- Import Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet'
      type='text/css' />
    <link href='https://fonts.googleapis.com/css?family=Unica+One'
      rel='stylesheet' type='text/css'>

    <script type="text/javascript">

      /* Outline

      I.  section for profile
        1)  header
        2)  form elements to let the user enter:
          a)  name
          b)  image file name
          c)  text description
        3)  clear button
        4)  submit button

      II.  section for links
        1)  categories determined by me
        2)  area to enter a url
        3)  pull down menu for choosing the link category
        4)  add button

      III.  section for entering content
        1)  status update with three buttons:
          a)  button for uploading an image
          b)  button for a status (text box)
          c)  button for a link
        2)  Image, status or link is displayed in main content area (below)

      IV.  section for posting content
        1)  main content goes here
        2)  most recent post goes at the top */

      <!--

      /**
       * updateProfile function
       * If the user has entered info for all three form fields, then the page
       * will update to show the new content.  Otherwise, the user will get a
       * message to alert them that a field was left blank.
       */
      function updateProfile() {

        /* If all fields have been completed... */
        if (document.getElementById('profile-name').value !== "") {
          if (document.getElementById('profile-image').value !== "") {
            if (document.getElementById('profile-description').value !== "") {

              /* ...then replace this form with the new content... */
              document.getElementById('header').innerHTML = "<h2>" +
                document.getElementById('profile-name').value + "</h2><p>" +
                "<img src=\'" + document.getElementById('profile-image').value +
                "\' alt=\'President image\'></p><p><h4>About me:</h4>" +
                document.getElementById('profile-description').value + "</p>";

            /* ...else, show an error. */
            } else {
              window.alert("Error: Profile description can\'t be blank.");
            }
          } else {
            window.alert("Error: Profile image can\'t be blank.");
          }
        } else {
          window.alert("Error: Profile name can\'t be blank.");
        }
      }

      /**
       * addLink function
       * If the user has entered info for all form fields, then the page will
       * update to show the new content.  Otherwise, the user will get a
       * message to alert them that a field was left blank.
       */
      function addLink() {

        /* If all fields have been completed... */
        if (document.getElementById('link-category').value !== "") {
          if (document.getElementById('link-url').value !== "") {

            /* ...add the link to the link table... */
            document.getElementById('links-table').innerHTML += "<tr><td>" +
              document.getElementById('link-category').value + "</td><td><a " +
              "href=\'" + document.getElementById('link-url').value + "\'>" +
              document.getElementById('link-url').value + "</a></td></tr>";

          /* ...else, show an error. */
          } else {
            window.alert("Error: Enter the URL you want to post.");
          }
        } else {
          window.alert("Error: Link category can\'t be blank.");
        }
      }

      /**
       * now function
       * Creates a new Date object, and uses it to make a formatted string that
       * contains the current date and time.
       */
      function now() {
        var currentTimeArray = new Date().toString().split(' ');

        var now = currentTimeArray[1].toString() + ". " +
          currentTimeArray[2].toString() + ", " +
          currentTimeArray[3].toString() + " at " +
          currentTimeArray[4].toString() + ":";

        return now;
      }

      /**
       * postImage function
       * If the user has entered a path to an image, then the page will update
       * to show the image in the content area.  Otherwise, the user will get a
       * message to alert them that a field was left blank.
       */
      function postImage() {
        var previousContent;    // Holds the value of previous posts to the page

        /* If all fields have been completed... */
        if (document.getElementById('content-image').value !== "") {

          /* ...get the previously posted content, post the new content, and
            append the old content below the new content... */
          previousContent = document.getElementById('page-posts').innerHTML;
          document.getElementById('page-posts').innerHTML = "<div " +
            "class=\'page-post\'><p class=\'date-and-time\'><h4>" + now() +
            "</h4></p><p class=\'post-image\'><img src=\'" +
            document.getElementById('content-image').value +
            "\' alt=\'President image\'></p></div>" + previousContent;

        /* ...else, show an error. */
        } else {
          window.alert("Error: Enter the path of the image you want to post.");
        }
      }

      /**
       * postStatus function
       * If the user has entered a status, then the page will update to show the
       * status in the content area.  Otherwise, the user will get a message to
       * alert them that a field was left blank.
       */
      function postStatus() {
        var previousContent;    // Holds the value of previous posts to the page

        /* If the user has entered a status... */
        if (document.getElementById('content-status').value !== "") {

          /* ...get the previously posted content, post the new content, and
            append the old content below the new content... */
          previousContent = document.getElementById('page-posts').innerHTML;
          document.getElementById('page-posts').innerHTML = "<div " +
            "class=\'page-post\'><p class=\'date-and-time\'><h4>" + now() +
            "</h4></p><p class=\'post-status\'>" +
            document.getElementById('content-status').value + "</p></div>" +
            previousContent;

        /* ...else, show an error. */
        } else {
          window.alert("Error: Enter the status you want to post.");
        }
      }

      /**
       * postLink function
       * If the user has entered a link, then the page will update to show the
       * link in the content area.  Otherwise, the user will get a message to
       * alert them that a field was left blank.
       */
      function postLink() {
        var previousContent;    // Holds the value of previous posts to the page

        /* If the user has entered a status... */
        if (document.getElementById('content-url').value !== "") {

          /* ...get the previously posted content, post the new content, and
            append the old content below the new content... */
          previousContent = document.getElementById('page-posts').innerHTML;
          document.getElementById('page-posts').innerHTML = "<div " +
            "class=\'page-post\'><p class=\'date-and-time\'><h4>" + now() +
            "</h4></p><p " + "class=\'post-link\'><a href src=\'" +
            document.getElementById('content-url').value + "\'>" +
            document.getElementById('content-url').value + "</a></p></div>" +
            previousContent;

        /* ...else, show an error. */
        } else {
          window.alert("Error: Enter the link you want to post.");
        }
      }

      // <-- End of JavaScript
    </script>
  </head>

  <body>
    <div class="wrapper">

      <div class="clearfix"></div>

      <div id="page-title">
        <h1>MyFace The Blog</h1>
      </div>

      <div class="clearfix"></div>

      <!-- Author's name, image, and a description of the author -->
      <div id="header">

        <h2>Enter Profile Information</h2>

        <!-- Form for updating profile info.  All forms must be completed. -->
        <form id="profile-form" action="">

          <p>
            <label>Name:
              <input class="text" id="profile-name" type="text" size="30" />
            </label>
          </p>

          <p>
            <label>Add an image:
              <input class="text" id="profile-image" type="text" size="30" />
            </label>
          </p>

          <p>
            <label>Description:
              <textarea class="text" id="profile-description" type="textarea"
              rows="4" cols="30"></textarea>
            </label>
          </p>

          <p>
            <label>
              <input class="btn" type="button" value="Submit"
                onclick="updateProfile();" />
            </label>
            <label>
              <input class="btn" type="reset" value="Clear" />
            </label>
          </p>

        </form>
      </div> <!-- End of header -->

      <!-- Author's links and link categories.  All fields are required. -->
      <div id="links">
        <hr />
        <h2>Add a Link</h2>

        <form id="link-form" action="">

          <p>
            <label>Enter a URL:
              <input class="text" id="link-url" type="text" size="30" />
            </label>

            <br />

            <label>Link Category:
              <select id="link-category">
                <option style="display: none"></option>
                <!-- TODO fix style in CSS -->
                <option>Funny</option>
                <option>Informative</option>
                <option>Sobering</option>
                <option>Silly</option>
                <option>Strange</option>
              </select>
            </label>
          </p>

          <p>
            <label>
              <input class="btn" type="button" value="Add Link"
                onclick="addLink();" />
            </label>
          </p>

        </form>

        <!-- TODO figure out better sorting by category -->
        <table summary='This table lists some links of interest.'>
          <tbody id="links-table"></tbody>
        </table>

      </div> <!-- End of links -->

      <!-- Main content of the page.  Posts can be images, statuses (text), or links.  Most recent post appears on top. -->
      <div id="content">
        <div id="update-content">
          <hr />
          <h2>Update Page</h2>

          <form id="content-form" action="">

            <p>
              <label>
                <input class="btn" type="button" value="Post Image"
                  onclick="postImage();" />
              </label>
              <label>
                <input class="text" id="content-image" type="text" size="30" />
              </label>
            </p>

            <p>
              <label>
                <input class="btn" type="button" value="Post Status"
                  onclick="postStatus();" />
              </label>
              <label>
                <textarea class="text" id="content-status"
                type="textarea" rows="4" cols="30"></textarea>
              </label>
            </p>

            <p>
              <label>
                <input class="btn" type="button" value="Post Link"
                  onclick="postLink();" />
              </label>
              <label>
                <input class="text" id="content-url" type="text" size="30" />
              </label>
            </p>

          </form>
        </div> <!-- End of update-content -->

        <div id="display-content">
          <hr>
          <h2>Display Content</h2>

          <div id="page-posts"></div>

        </div> <!-- End of display-content -->
      </div> <!-- End of content-area -->

    </div> <!-- End of wrapper -->
  </body>
</html>
